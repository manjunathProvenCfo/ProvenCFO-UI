@model List<Proven.Model.XeroGlAccountVM>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@*@Styles.Render("~/bundles/customcss")
    @Scripts.Render("~/bundles/modernizr")*@

<div class="card mb-3">
    <div class="card-header">
        <div class="row align-items-center justify-content-between">
            <div class="col-6 col-sm-auto d-flex align-items-center pr-0">

            </div>
            <div class="col-6 col-sm-auto ml-auto text-right pl-0">
                <div class="d-none" id="purchases-actions">
                    <div class="input-group input-group-sm">
                        <select class="custom-select cus" aria-label="Bulk actions">
                            <option selected="">Bulk actions</option>

                            <option value="Delete">Delete</option>
                            <option value="Archive">Archive</option>
                        </select>
                        <button class="btn btn-falcon-default btn-sm ml-2" type="button">Submit</button>
                    </div>
                </div>
                <div id="dashboard-actions">
                    <button class="btn btn-falcon-default btn-sm" type="button"><span class="fas fa-plus" data-fa-transform="shrink-3 down-2"></span><span class="d-none d-sm-inline-block ml-1">Async From Xero </span></button>
                </div>
            </div>
        </div>
    </div>
    <div class="card-body px-0 pt-0">
        <div class="dashboard-data-table">
            <table id="clientlist" class="table table-sm table-dashboard fs--1 data-table border-bottom">
                <thead class="bg-200 text-900">
                    <tr>


                        <th class="sort pr-1 align-middle" width="15%">Code</th>
                        <th class="sort pr-1 align-middle" width="15%">Name</th>
                        <th class="sort pr-1 align-middle" width="15%">Type</th>
                        <th class="sort pr-1 align-middle" width="15%">Description</th>

                    </tr>
                </thead>
                <tbody id="purchases">
                    @foreach (var item in Model)
                    {
                        <tr class="btn-reveal-trigger">

                            <td class="align-middle">
                                @Html.DisplayFor(modelItem => item.Code)
                            </td>
                            <td class="align-middle">
                                @Html.DisplayFor(modelItem => item.Name)
                            </td>
                            <td class="align-middle">
                                @Html.DisplayFor(modelItem => item.Type)
                            </td>
                            <td class="align-middle">
                                @Html.DisplayFor(modelItem => item.Class)
                            </td>

                        </tr>
                    }
                </tbody>

            </table>
        </div>
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/js/table");
    <script>

        $(document).ready(function () {
            AgencyDropdownPartialViewChange();

        });

        function AgencyDropdownPartialViewChange() {
            var ClientID = $("#ddlclient option:selected").val();

            $.ajax({
                url: '/AgencyService/GetClientDetails?id=' + ClientID,
                type: "GET",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data != null) {
                        // Write here what should happend once client selected
                        SetUserPreferencesForAgency();
                    }
                    else {
                        // Write here what should happend once selected client is null
                    }
                },
                error: function () {
                    // Write here what should happend when action result is errored.
                }
            });
        }

    </script>

}



